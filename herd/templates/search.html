{% extends "layout.html" %}

{% block stylesheet %}
<link rel="stylesheet" type="text/css"
    href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.0.1/css/bootstrap.min.css" />
<link rel="stylesheet" type="text/css"
    href="https://cdn.datatables.net/v/bs5/jq-3.6.0/dt-1.11.5/b-2.2.2/r-2.2.9/sc-2.0.5/sb-1.3.2/sp-2.0.0/sl-1.3.4/datatables.min.css" />

<link rel="stylesheet" href="{{url_for('static',filename='search.css') }}">
{% endblock %}

{% block content %}
<div class="container">
    <div class="row text-start mt-2">
        <h2 class="my-2 display-4">{{ title }}</h2>
    </div>

    <div class="mt-3 row">
        <div class="col-lg-3 col-md-12 p-1">
            <form action="" method="POST">
                {{ form.hidden_tag() }}
                <fieldset class="'form-group p-3 mb-3" id="searchFeildSet">
                    <div class="display-6 mb-4">
                        <span class="bi-search" style="font-size: 2rem;"></span>
                        <span class="display-6 text-center"> Search</span>
                    </div>
    
                    {% if form.chromosome.errors %}
                    <div class="form-group mb-2 required">
                        {{ form.chromosome.label(class="form-control-label text-dark") }}
                        {{ form.chromosome(class="form-select form-control is-invalid") }}
                        <div class="invalid-feedback">
                            {% for error in form.chromosome.errors %}
                            <span>{{error}}</span>
                            {% endfor %}
                        </div>
                    </div>
                    {% else %}
                    <div class="form-group mb-2 required">
                        {{ form.chromosome.label(class="form-control-label text-dark") }}
                        {{ form.chromosome(class="form-select form-control") }}
    
                    </div>
    
                    {% endif %}
    
                    {% if form.chromStart.errors %}
                    <div class="form-group mb-2 required">
                        {{ form.chromStart.label(class="form-control-label text-dark") }}
                        {{ form.chromStart(class="form-control form-control-lg is-invalid", placeholder='e.g.
                        10000') }}
    
                        <div class="invalid-feedback">
                            {% for error in form.chromStart.errors %}
                            <span>{{error}}</span>
                            {% endfor %}
                        </div>
                    </div>
                    {% else %}
                    <div class="form-group mb-2 required">
                        {{ form.chromStart.label(class="form-control-label text-dark") }}
                        {{ form.chromStart(class="form-control form-control-lg ", placeholder=' e.g. 10000') }}
    
                    </div>
                    {% endif %}
    
                    {% if form.chromEnd.errors %}
                    <div class="form-group mb-2 required">
                        {{ form.chromEnd.label(class="form-control-label text-dark") }}
                        {{ form.chromEnd(class="form-control form-control-lg is-invalid", placeholder='e.g. 20000')
                        }}
    
                        <div class="invalid-feedback">
                            {% for error in form.chromEnd.errors %}
                            <span>{{error}}</span>
                            {% endfor %}
                        </div>
                    </div>
                    {% else %}
                    <div class="form-group mb-2 required">
                        {{ form.chromEnd.label(class="form-control-label text-dark") }}
                        {{ form.chromEnd(class="form-control form-control-lg ", placeholder='e.g. 20000') }}
                    </div>
                    {% endif %}
    
                    <div class="form-group mb-2">
                        {{ form.system.label(class="form-control-label text-dark") }}
                        {{ form.system(class="form-select form-control") }}
                    </div>
    
                    <div class="form-group mb-2">
                        {{ form.organ.label(class="form-control-label text-dark") }}
                        {{ form.organ(class="form-select form-control") }}
                    </div>
    
                    <div class="form-group mb-2">
                        {{ form.tissue.label(class="form-control-label text-dark") }}
                        {{ form.tissue(class="form-select form-control") }}
                    </div>
    
    
                    <div class="text-center">
                        <div class="form-check form-switch form-check-inline">
                            {{form.treated.label(class="form-check-label text-dark", for="checkBoxDisease")}}
                            {{form.treated(class="form-check-input ", type="checkbox", id="checkBoxDisease")}}
                        </div>
                        <div class="form-check form-switch form-check-inline">
                            {{form.disease.label(class="form-check-label text-dark", for="checkBoxTreated")}}
                            {{form.disease(class="form-check-input", type="checkbox", id="checkBoxTreated")}}
                        </div>
                    </div>
    
                    <div class="text-center my-4">
                        {{ form.submit(class="btn btn-block mb-4 btn-dark")}}
                    </div>
                </fieldset>
            </form>
        </div>
    
        <div class="col-lg-9 col-md-12">
            <h5 class=" text-center display-6">Results</h3>
                <p class="text-left">This table is great</p>
                <div class="container ">
                    <span class=""><b>Show / Hide Columns: </b></span>
                    <!-- <div class="btn-group flex-wrap" role="group" >
                        <button type="button" class="btn btn-primary columnSelector btn-xs col-lg-1" data-column="0">HERD Accession</button>
                        <button type="button" class="btn btn-primary columnSelector btn-xs col-lg-1" data-column="1">Chromosome</button>
                        <button type="button" class="btn btn-primary columnSelector btn-xs col-lg-1" data-column="2">Chrom Start</button>
                        <button type="button" class="btn btn-primary columnSelector btn-xs col-lg-1" data-column="3">Chrom End</button>
                        <button type="button" class="btn btn-primary columnSelector btn-xs col-lg-1" data-column="4">Prefix</button>
                        <button type="button" class="btn btn-primary columnSelector btn-xs col-lg-1" data-column="5">VISTA Overlap</button>
                        <button type="button" class="btn btn-primary columnSelector btn-xs col-lg-1" data-column="6">Contains VISTA</button>
                        <button type="button" class="btn btn-primary columnSelector btn-xs col-lg-1" data-column="7">eRNA Overlap</button>
                        <button type="button" class="btn btn-primary columnSelector btn-xs col-lg-1" data-column="8">Contains eRNA</button>
                    </div> -->
                    <div class="btn-group flex-wrap" role="group" >
                        <button type="button" class="btn btn-primary columnSelector btn-xs col-lg-1" data-column="0">1</button>
                        <button type="button" class="btn btn-primary columnSelector btn-xs col-lg-1" data-column="1">2</button>
                        <button type="button" class="btn btn-primary columnSelector btn-xs col-lg-1" data-column="2">3</button>
                        <button type="button" class="btn btn-primary columnSelector btn-xs col-lg-1" data-column="3">4</button>
                        <button type="button" class="btn btn-primary columnSelector btn-xs col-lg-1" data-column="4">5</button>
                        <button type="button" class="btn btn-primary columnSelector btn-xs col-lg-1" data-column="5">6</button>
                        <button type="button" class="btn btn-primary columnSelector btn-xs col-lg-1" data-column="6">7</button>
                        <button type="button" class="btn btn-primary columnSelector btn-xs col-lg-1" data-column="7">8</button>
                        <button type="button" class="btn btn-primary columnSelector btn-xs col-lg-1" data-column="8">9</button>
                    </div>

                    <span class="ms-1"><b>Filter using Annotation</b></span>
                    
                    <!-- <div class="ms-3 btn-group" role="group" aria-label="Basic checkbox toggle button group">

                        <input type="checkbox" class="btn-check columnSelector " id="btncheck1"  value="0" autocomplete="off" >
                        <label class="btn btn-outline-primary active" for="btncheck1">1</label>
                    
                        <input type="checkbox" class="btn-check columnSelector " id="btncheck2"  value="1" autocomplete="off" >
                        <label class="btn btn-outline-primary active" for="btncheck2">2</label>
                    
                        <input type="checkbox" class="btn-check columnSelector " id="btncheck3"  value="2" autocomplete="off" >
                        <label class="btn btn-outline-primary active" for="btncheck3">3</label>

                        <input type="checkbox" class="btn-check columnSelector " id="btncheck4"  value="3" autocomplete="off" >
                        <label class="btn btn-outline-primary active " for="btncheck4">4</label>

                        <input type="checkbox" class="btn-check columnSelector " id="btncheck5"  value="4" autocomplete="off" >
                        <label class="btn btn-outline-primary active " for="btncheck5">5</label>

                        <input type="checkbox" class="btn-check columnSelector " id="btncheck6"  value="5" autocomplete="off" >
                        <label class="btn btn-outline-primary active " for="btncheck6">6</label>

                        <input type="checkbox" class="btn-check columnSelector " id="btncheck7"  value="6" autocomplete="off" >
                        <label class="btn btn-outline-primary active " for="btncheck7">7</label>

                        <input type="checkbox" class="btn-check columnSelector " id="btncheck8"  value="7" autocomplete="off" >
                        <label class="btn btn-outline-primary active " for="btncheck8">8</label>

                        <input type="checkbox" class="btn-check columnSelector " id="btncheck9"  value="8" autocomplete="off" >
                        <label class="btn btn-outline-primary active " for="btncheck9">9</label>
                        
                    </div> -->

                </div>
                    
                <table id="data" class="responsive display  table table-striped table-bordered nowrap" style="width:100%">
                    <thead>
                        <tr>
                            <th class="all">HERD Accession</th>
                            <th class="all">Chromosome</th>
                            <th class="all">Chrom Start</th>
                            <th class="all">Chrom End</th>
                            <th class="all">Prefix</th>
                            <th class="all">VISTA Overlap</th>
                            <th class="all">Contains VISTA</th>
                            <th class="all">eRNA Overlap</th>
                            <th class="all">Contains eRNA</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for mergedPeak in result %}
                        <tr>
                            <td>{{ mergedPeak[0] }}</td>
                            <td>{{ mergedPeak[1] }}</td>
                            <td>{{ mergedPeak[2] }}</td>
                            <td>{{ mergedPeak[3] }}</td>
                            <td>{{ mergedPeak[4] }}</td>
                            <td>{{ mergedPeak[5] }}</td>
                            <td>{{ mergedPeak[6] }}</td>
                            <td>{{ mergedPeak[7] }}</td>
                            <td>{{ mergedPeak[8] }}</td>          
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
    
        </div>

    </div>
    
</div>
{% endblock content %}

{% block scripts %}
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.0.1/js/bootstrap.bundle.min.js"></script>
<script type="text/javascript" src="https://cdn.datatables.net/v/bs5/jq-3.6.0/dt-1.11.5/b-2.2.2/r-2.2.9/sc-2.0.5/sb-1.3.2/sp-2.0.0/sl-1.3.4/datatables.min.js"></script>
<script type=text/javascript src="{{url_for('static', filename='js/search.js') }}"></script>
{% endblock %}

